# BookTracker iOS - UI/UX Implementation Plan

Generated by: gpt-5-codex with high reasoning effort
Date: 2025-01-09

## A. IMMEDIATE FIXES (Priority 1 - Get app building and running)

### FIX-001 — Restore SwiftUI files in Xcode project
- **Description**: Add the existing SwiftUI screens and view models (Auth, Books, Goals, Search, Core) to `BookTrackerApp.xcodeproj` so Xcode recognizes and compiles them.
- **Acceptance Criteria**: All listed SwiftUI files appear in the navigator, build phases include them, and `Cmd+B` succeeds up to linker stage.
- **Dependencies**: None
- **Complexity**: M
- **Files Affected**: `ios/BookTrackerApp/BookTrackerApp.xcodeproj/project.pbxproj`

### FIX-002 — Reintroduce authentication gate at app root
- **Description**: Update `RootView` to observe `AuthViewModel` login state and show Login/Register flows before revealing `MainTabView`; ensure unauthorized alerts only surface when API calls fail post-login.
- **Acceptance Criteria**: Launching the app shows Login when unauthenticated, switches to tabs after login, and no unauthorized alert appears on first load.
- **Dependencies**: FIX-001
- **Complexity**: M
- **Files Affected**: `ios/BookTrackerApp/Sources/Core/RootView.swift`, `ios/BookTrackerApp/Sources/Core/MainTabView.swift`, `ios/BookTrackerApp/Sources/Auth/LoginView.swift`, `ios/BookTrackerApp/Sources/Auth/RegisterView.swift`

### FIX-003 — Wire AuthViewModel to repositories via AppContainer
- **Description**: Ensure `AuthViewModel` uses injected `AuthRepository` from `AppContainer`, handles token persistence, and publishes state changes for RootView.
- **Acceptance Criteria**: Login/Register buttons call repository, store JWT, update `isAuthenticated`, and expose loading/error states.
- **Dependencies**: FIX-001
- **Complexity**: M
- **Files Affected**: `ios/BookTrackerApp/Sources/Core/AppContainer.swift`, `ios/BookTrackerApp/Sources/Auth/AuthViewModel.swift`

### FIX-004 — Resolve unauthorized API errors
- **Description**: Audit API request builders to attach JWT on authenticated calls, refresh token when needed, and surface meaningful errors to view models.
- **Acceptance Criteria**: Book list fetch succeeds after login; unauthorized errors only appear when token truly invalid; logs show Authorization header present.
- **Dependencies**: FIX-003
- **Complexity**: M
- **Files Affected**: `ios/BookTrackerApp/Sources/Application/Repositories/*`, `ios/BookTrackerApp/Sources/InfrastructureIOS/Networking/*`

### FIX-005 — Minimal smoke test target
- **Description**: Add a lightweight UI test that launches app, stubs auth success, and verifies Login->Tabs transition to prevent regressions.
- **Acceptance Criteria**: New UITest target compiles and passes locally in CI with mocked network.
- **Dependencies**: FIX-002
- **Complexity**: S
- **Files Affected**: `ios/BookTrackerApp/Tests/UITests/AuthFlowUITests.swift`, project test settings

---

## B. CORE UI IMPLEMENTATION (Priority 2 - Essential screens)

### UI-AUTH-001 — Implement LoginView UI/UX
- **Description**: Build Login screen with email/password fields, validation hints, CTA, and link to Register; bind to `AuthViewModel`.
- **Acceptance Criteria**: Form validates email format/password length, disabled button until valid, shows spinner on submit, errors map to inline text.
- **Dependencies**: FIX-003
- **Complexity**: M
- **Files Affected**: `ios/BookTrackerApp/Sources/Auth/LoginView.swift`, `ios/BookTrackerApp/Sources/Auth/AuthViewModel.swift`

### UI-AUTH-002 — Implement RegisterView UI/UX
- **Description**: Build registration form (name/email/password/confirm), share validation logic, auto-login on success, navigate back to login on cancel.
- **Acceptance Criteria**: All fields validated with per-field messaging, success triggers authenticated state, analytics/logging hook optional.
- **Dependencies**: UI-AUTH-001
- **Complexity**: M
- **Files Affected**: `ios/BookTrackerApp/Sources/Auth/RegisterView.swift`, shared validation helpers

### UI-CORE-001 — MainTabView structure
- **Description**: Create bottom TabView with Books, Search, Goals (placeholder dashboards) and inject necessary view models via environment.
- **Acceptance Criteria**: Tabs persist, icons/titles match design, state preserved when switching tabs.
- **Dependencies**: FIX-002
- **Complexity**: S
- **Files Affected**: `ios/BookTrackerApp/Sources/Core/MainTabView.swift`, `ios/BookTrackerApp/Sources/Core/AppContainer.swift`

### UI-BOOKS-001 — My Books list & filtering
- **Description**: Compose `BooksListView` with segmented control for statuses, list of `BookCard`s, pull-to-refresh, and skeleton/loading states.
- **Acceptance Criteria**: Switching status refetches/filter results, list supports add button, empty state per segment.
- **Dependencies**: UI-CORE-001
- **Complexity**: L
- **Files Affected**: `ios/BookTrackerApp/Sources/Books/BooksListView.swift`, `ios/BookTrackerApp/Sources/Books/BookCard.swift`, related view models

### UI-BOOKS-002 — Book detail & progress updates
- **Description**: Build `BookDetailView` showing cover, metadata, progress slider/input, status picker, star rating, notes summary.
- **Acceptance Criteria**: Updating progress/status sends repository call, shows toast/error on failure, rating limited to finished books.
- **Dependencies**: UI-BOOKS-001
- **Complexity**: L
- **Files Affected**: `ios/BookTrackerApp/Sources/Books/BookDetailView.swift`, detail view model

### UI-BOOKS-003 — AddBookView flow
- **Description**: Modal/add form allowing manual entry or prefilled data from search, with status selection and initial progress.
- **Acceptance Criteria**: Save adds to correct status list, form validation for title/author, dismiss on success.
- **Dependencies**: UI-BOOKS-001
- **Complexity**: M
- **Files Affected**: `ios/BookTrackerApp/Sources/Books/AddBookView.swift`

### UI-SEARCH-001 — SearchView with Google Books integration
- **Description**: Implement search bar, throttled query, results via `SearchResultCard`, add-to-library CTA hooking to AddBook or quick add.
- **Acceptance Criteria**: Displays results with pagination/infinite scroll, handles empty/no-network, pressing add links to repository.
- **Dependencies**: UI-BOOKS-003
- **Complexity**: L
- **Files Affected**: `ios/BookTrackerApp/Sources/Search/SearchView.swift`, `ios/BookTrackerApp/Sources/Search/SearchResultCard.swift`

### UI-GOALS-001 — Goals list dashboard
- **Description**: Build `GoalsListView` showing active/completed tabs, `GoalCard` with progress bars and deadline info, plus CTA to create new goal.
- **Acceptance Criteria**: Progress updates automatically from reading data, overdue goals highlighted, empty state messaging.
- **Dependencies**: UI-CORE-001
- **Complexity**: M
- **Files Affected**: `ios/BookTrackerApp/Sources/Goals/GoalsListView.swift`, `ios/BookTrackerApp/Sources/Goals/GoalCard.swift`

### UI-GOALS-002 — CreateGoalView workflow
- **Description**: Present sheet/form to define target books/pages, deadline, and tracked shelf; integrate validation and autopopulation from current stats.
- **Acceptance Criteria**: Form enforces deadline >= today, shows progress preview, saves via Goals repository.
- **Dependencies**: UI-GOALS-001
- **Complexity**: M
- **Files Affected**: `ios/BookTrackerApp/Sources/Goals/CreateGoalView.swift`

### UI-DASH-001 — Dashboard summary (within Books tab header)
- **Description**: Add dashboard section to Books tab summarizing stats (books by status, currently reading, active goals snapshot).
- **Acceptance Criteria**: Shows aggregated numbers, tappable cards navigates to detail/Goals, updates reactively.
- **Dependencies**: UI-BOOKS-001, UI-GOALS-001
- **Complexity**: M
- **Files Affected**: `ios/BookTrackerApp/Sources/Books/BooksListView.swift`, shared dashboard components

---

## C. UX PATTERNS & STATES (Priority 3 - Polish and user experience)

### UX-NAV-001 — Define navigation flows & transitions
- **Description**: Standardize navigation stack behavior (books->detail->add progress, goals->detail) using NavigationStack/Link, ensuring deep-link compatibility.
- **Acceptance Criteria**: Back navigation consistent, state restoration works, deep links open correct view.
- **Dependencies**: UI-CORE-001 and respective screen implementations
- **Complexity**: M
- **Files Affected**: `RootView.swift`, `MainTabView.swift`, per-view navigation wrappers

### UX-EMPTY-001 — Empty states per feature
- **Description**: Design copy + illustrations/icons for Books/Search/Goals empty states and integrate into respective views.
- **Acceptance Criteria**: Each screen shows contextual empty message/action, accessible labels provided.
- **Dependencies**: Corresponding screen tasks (UI-BOOKS-001 etc.)
- **Complexity**: S
- **Files Affected**: `BooksListView.swift`, `SearchView.swift`, `GoalsListView.swift`, shared components

### UX-LOAD-001 — Loading indicators & skeletons
- **Description**: Introduce consistent loading overlays/skeletons for list/detail screens, using shared view modifiers.
- **Acceptance Criteria**: All network-bound views show non-blocking indicator; skeletons match card shapes.
- **Dependencies**: Screen implementations
- **Complexity**: S
- **Files Affected**: `Shared/Components/LoadingSkeleton.swift`, per-view usage

### UX-ERROR-001 — Error handling & messaging
- **Description**: Create error banner/snackbar component with retry hooks; standardize error enums in view models.
- **Acceptance Criteria**: Network or validation errors surface via banner with optional retry; analytics events fired.
- **Dependencies**: FIX-004
- **Complexity**: M
- **Files Affected**: `Shared/Components/ErrorBanner.swift`, view models across Auth/Books/Search/Goals

### UX-FORM-001 — Form validation & feedback framework
- **Description**: Build reusable validation helpers + field styles for Auth, AddBook, CreateGoal forms (live validation, inline errors).
- **Acceptance Criteria**: Invalid fields show red border/message, submit disabled until valid, VoiceOver reads error.
- **Dependencies**: UI-AUTH-001/002, UI-BOOKS-003, UI-GOALS-002
- **Complexity**: M
- **Files Affected**: `Shared/Validation/FormValidator.swift`, per form view

### UX-REFRESH-001 — Pull-to-refresh
- **Description**: Enable `refreshable` on Books, Goals, Search lists with haptic trigger and loading state integration.
- **Acceptance Criteria**: Pull gesture refreshes data, handles concurrency cancellation, shows success tick.
- **Dependencies**: UI-BOOKS-001, UI-GOALS-001, UI-SEARCH-001
- **Complexity**: S
- **Files Affected**: `BooksListView.swift`, `GoalsListView.swift`, `SearchView.swift`

### UX-OFFLINE-001 — Offline support considerations
- **Description**: Add basic offline awareness (reachability observer, cached data display with banner) to prevent crashes when offline.
- **Acceptance Criteria**: App shows "Offline mode" banner, uses last cached list for Books/Goals, disables network-only actions gracefully.
- **Dependencies**: FIX-004
- **Complexity**: L
- **Files Affected**: `InfrastructureIOS/Networking/ReachabilityService.swift`, view models for Books/Goals/Search

---

## D. POLISH & REFINEMENT (Priority 4 - Final touches)

### POLISH-ANI-001 — Micro-animations & transitions
- **Description**: Add spring animations for adding books/goals, smooth progress updates, matched geometry for cards.
- **Acceptance Criteria**: Animations feel natural (<300ms), respect Reduce Motion, no performance regressions.
- **Dependencies**: Relevant UI complete
- **Complexity**: M
- **Files Affected**: `BookCard.swift`, `GoalCard.swift`, `BookDetailView.swift`, animation extensions

### POLISH-HAPTIC-001 — Haptic feedback hooks
- **Description**: Integrate `UINotificationFeedbackGenerator` for success/error, `UIImpactFeedbackGenerator` for tab switches and pull-to-refresh completion.
- **Acceptance Criteria**: Haptics fire on add/save success, validation failure, refresh complete; respects device capability toggle.
- **Dependencies**: UX-REFRESH-001, form submissions
- **Complexity**: S
- **Files Affected**: `Shared/Services/HapticsService.swift`, invoked in Auth/Books/Goals actions

### POLISH-ACCESS-001 — Accessibility & Dynamic Type
- **Description**: Audit views for VoiceOver labels, traits, focus order, and support Dynamic Type with scalable fonts.
- **Acceptance Criteria**: VoiceOver reads actionable content meaningfully, large text does not truncate, contrast meets WCAG AA.
- **Dependencies**: Core UI screens finished
- **Complexity**: M
- **Files Affected**: All SwiftUI views, `Shared/Theme/Typography.swift`

### POLISH-DARK-001 — Dark mode theming
- **Description**: Define color palette tokens, update components to use semantic colors, verify contrast in light/dark.
- **Acceptance Criteria**: Switching system appearance updates UI without artifacts; custom illustrations adapt.
- **Dependencies**: Core UI complete
- **Complexity**: M
- **Files Affected**: `Shared/Theme/ColorPalette.swift`, per-view color usage

### POLISH-ONBOARD-001 — Onboarding experience
- **Description**: Create simple onboarding carousel highlighting features with CTA into Login; show only on first launch.
- **Acceptance Criteria**: Onboarding screens page horizontally, state saved in user defaults, skip button available.
- **Dependencies**: FIX-002, Auth screens
- **Complexity**: M
- **Files Affected**: `ios/BookTrackerApp/Sources/Auth/OnboardingView.swift`, `RootView.swift`

---

## Implementation Strategy

**Phase 1 - Foundation** (Week 1):
Start with FIX-001 through FIX-005 to regain a working build and establish the authentication flow.

**Phase 2 - Core Features** (Weeks 2-3):
Implement UI-AUTH and UI-CORE tasks, then tackle the main feature sets (Books, Search, Goals) in parallel if team bandwidth allows.

**Phase 3 - UX Polish** (Week 4):
Add UX patterns, empty states, loading indicators, and error handling to create a professional user experience.

**Phase 4 - Final Polish** (Week 5):
Animations, haptics, accessibility, dark mode, and onboarding to deliver a delightful, production-ready app.

---

## Task Summary

| Priority | Phase | Task Count | Estimated Effort |
|----------|-------|------------|------------------|
| P1 - Immediate Fixes | Foundation | 5 tasks | 2-3 days |
| P2 - Core UI | Features | 10 tasks | 2-3 weeks |
| P3 - UX Patterns | Polish | 7 tasks | 1 week |
| P4 - Polish & Refinement | Final | 5 tasks | 1 week |

**Total**: 27 tasks across 5-7 weeks (single developer, full-time)
